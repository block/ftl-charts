fullnameOverride: ""
nameOverride: ""

logLevel: debug
logJson: true

image:
  tag: null
  pullPolicy: IfNotPresent
  base: "ftl0"

secrets:
  logEncryptionKey: null
  asyncEncryptionKey: null
  controllerRegistryUsername: null
  controllerRegistryPassword: null
  runnerRegistryUsername: null
  runnerRegistryPassword: null

controller:
  controllersRoleArn: arn:aws:iam::ftl-controllers-irsa-role
  replicas: 1
  revisionHistoryLimit: 0

  image:
    repository: null
    tag: null
    pullPolicy: null
    name: "ftl-controller"

  resources:
    requests:
      memory: 256Mi
      cpu: 10m
    limits:
      memory: 256Mi
      cpu: 2

  envFrom: null
  dbConnectionString: "postgres://$(endpoint):$(port)/tbd?sslmode=disable&user=$(username)&password=$(password)"
  serviceAccountName: ftl

  env:
    - name: MY_POD_IP
      valueFrom:
        fieldRef:
          fieldPath: status.podIP
    - name: FTL_BIND
      value: "http://$(MY_POD_IP):8892"
    - name: FTL_ADVERTISE
      value: "http://$(MY_POD_IP):8892"
    - name: HOST_IP
      valueFrom:
        fieldRef:
          fieldPath: status.hostIP

  port: 8892

  readinessProbe: null

  service:
    type: ClusterIP
    annotations: null

  podAnnotations: null
  nodeSelector: null
  affinity: null
  topologySpreadConstraints: null
  tolerations: null

provisioner:
  provisionersRoleArn: arn:aws:iam::ftl-provisioners-irsa-role
  replicas: 1
  revisionHistoryLimit: 0
  configMap: "ftl-provisioner-default-config"
  image:
    repository: null
    tag: null
    pullPolicy: null
    name: "ftl-provisioner"

  envFrom: null
  serviceAccountName: ftl-provisioner

  readinessProbe: null

  podAnnotations: null
  nodeSelector: null
  affinity: null
  topologySpreadConstraints: null
  tolerations: null
  resources:
    requests:
      memory: 256Mi
      cpu: 10m
    limits:
      memory: 256Mi
      cpu: 2
runner:
  revisionHistoryLimit: 0

  envFrom: null
  image:
    pullPolicy: null

  resources:
    requests:
      memory: 256Mi
      cpu: 10m
    limits:
      memory: 256Mi
      cpu: 2
  env: null

  port: 8892

  readinessProbe: null

  podAnnotations: null
  nodeSelector: null
  affinity: null
  topologySpreadConstraints: null
  tolerations: null


cron:
  replicas: 3
  storage: 50Mi
  revisionHistoryLimit: 0
  
  services:
    cron:
      type: ClusterIP
      annotations: null
      containerPort: 8892
      port: 8892
    raft:
      annotations: null
      containerPort: 8893
      port: 8893

  env: null
  image:
    repository: null
    tag: null
    pullPolicy: null
    name: "ftl-cron"

  envFrom: null
  serviceAccountName: ftl-cron
  podAnnotations: null

  raft:
    annotations: null
    containerPort: 8893
    port: 8893

  resources:
    requests:
      memory: 128Mi
      cpu: 10m
    limits:
      memory: 128Mi
      cpu: 2

postgresql:
  enabled: false
  architecture: standalone
  primary:
    resources:
      requests:
        memory: 1024Mi
      limits:
        memory: 1024Mi
  global:
    postgresql:
      auth:
        username: ftl
        password: ftl
        database: ftl

istio:
  enabled: false # set to true to have this chart install the grpc config to enable trailers
  holdApplicationUntilProxyStarts: true

registry:
  repository: ""
  allowInsecure: false
  create: false
  service:
    annotations: null

ingress:
  enabled: false
  allowOrigin: "*"
  env: null

  ports:
    - name: ingress
      containerPort: 8891
      protocol: TCP
      port: 8891

  ingressAnnotations:
    kubernetes.io/ingress.class: nginx
  replicas: 1
  revisionHistoryLimit: 0

  image:
    repository: null
    tag: null
    pullPolicy: null
    name: "ftl-http-ingress"

  resources:
    requests:
      memory: 128Mi
      cpu: 10m
    limits:
      memory: 128Mi
      cpu: 2

  envFrom: null
  serviceAccountName: ftl-http-ingress

  readinessProbe: null

  service:
    type: ClusterIP
    annotations: null
    ports:
      - name: "http-8891"
        port: 80
        protocol: TCP
        targetPort: 8891

  podAnnotations: null
  nodeSelector: null
  affinity: null
  topologySpreadConstraints: null
  tolerations: null

timeline:
  enabled: true
  env: null

  port: 8892

  replicas: 1
  revisionHistoryLimit: 0

  image:
    repository: null
    tag: null
    pullPolicy: null
    name: "ftl-timeline"

  resources:
    requests:
      memory: 128Mi
      cpu: 10m
    limits:
      memory: 128Mi
      cpu: 2
  envFrom: null
  serviceAccountName: ftl-timeline
  readinessProbe: null

  service:
    annotations: null

  podAnnotations: null
  nodeSelector: null
  affinity: null
  topologySpreadConstraints: null
  tolerations: null

schema:
  enabled: true
  replicas: 3
  storage: 50Mi
  env: null

  revisionHistoryLimit: 0

  image:
    repository: null
    tag: null
    pullPolicy: null
    name: "ftl-schema"

  resources:
    requests:
      memory: 256Mi
      cpu: 10m
    limits:
      memory: 256Mi
      cpu: 2

  envFrom: null
  serviceAccountName: ftl-schema
  serviceName: ftl-schema-raft

  readinessProbe: null

  services:
    schema:
      type: ClusterIP
      annotations: null
      port: 8892
    raft:
      annotations: null
      port: 8893
  podAnnotations: null
  nodeSelector: null
  affinity: null
  topologySpreadConstraints: null
  tolerations: null

console:
  enabled: true
  env: null
  port: 8892

  replicas: 1
  revisionHistoryLimit: 0

  image:
    repository: null
    tag: null
    pullPolicy: null
    name: "ftl-console"

  resources:
    requests:
      memory: 128Mi
      cpu: 10m
    limits:
      memory: 128Mi
      cpu: 2

  envFrom: null
  serviceAccountName: ftl-console

  readinessProbe: null

  service:
    type: ClusterIP
    annotations: null
    ports:
      - name: "http-8892"
        port: 8892
        protocol: TCP
        targetPort: 8892

  podAnnotations: null
  nodeSelector: null
  affinity: null
  topologySpreadConstraints: null
  tolerations: null

lease:
  env: null
  port: 8892
  logLevel: debug
  logJson: true

  replicas: 1
  revisionHistoryLimit: 0

  image:
    repository: null
    tag: null
    pullPolicy: null
    name: "ftl-lease"

  resources:
    requests:
      memory: 128Mi
      cpu: 10m
    limits:
      memory: 128Mi
      cpu: 2

  envFrom: null
  serviceAccountName: ftl-lease

  readinessProbe: null

  service:
    annotations: null

  podAnnotations: null
  nodeSelector: null
  affinity: null
  topologySpreadConstraints: null
  tolerations: null

admin:
  logLevel: debug
  logJson: true
  port: 8892

  replicas: 1
  revisionHistoryLimit: 0

  image:
    repository: null
    tag: null
    pullPolicy: null
    name: "ftl-admin"

  resources:
    requests:
      memory: 128Mi
      cpu: 10m
    limits:
      memory: 128Mi
      cpu: 2

  envFrom: null
  serviceAccountName: ftl-admin

  readinessProbe: null

  service:
    annotations: null
    port: 8892

  env: null
  podAnnotations: null
  nodeSelector: null
  affinity: null
  topologySpreadConstraints: null
  tolerations: null
